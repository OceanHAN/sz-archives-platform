# 核心功能开发计划：地图与历史地标管理系统

您提到的功能是“数字人文”与“地理信息”结合的核心模块。我们将基于开源地图引擎 (Leaflet) 实现一套无需 API Key 即可运行的地图系统，并重点打造“地标历史沿革”的时间轴展示效果。

## 1. 数据库与后端架构 (Backend)

我们将新增两个核心实体来支撑这一功能：

### 实体设计
*   **`Landmark` (地标)**
    *   基础信息：名称、地址、经纬度、封面图、简介。
    *   **`category` (分类)**：用于区分图标（如：红色记忆、抗战遗址、文化地标）。
*   **`LandmarkEvent` (地标历程/历史事件)**
    *   关联：属于哪个地标。
    *   **`year` (年份/时间)**：用于时间轴排序（如 1925, 1949）。
    *   内容：事件标题、详细描述、历史影像/图片。

### API 接口
*   `GET /landmarks`: 获取地图上所有的点位信息（含分类）。
*   `GET /landmarks/:id`: 获取特定地标的详情及其完整的历史事件轴（按时间排序）。
*   管理端 CRUD 接口：用于后台增删改查地标及事件。

## 2. 后台管理系统 (Admin)

新增 **“地图地标管理”** 模块：

### 功能特性
1.  **地标列表**：展示所有收录的地点。
2.  **可视化编辑**：
    *   **坐标拾取**：在编辑页嵌入地图，点击地图即可自动填入经纬度（解决手动输入困难的问题）。
    *   **分类管理**：选择“红色”、“抗战”等标签，系统自动匹配对应图标。
3.  **历史沿革管理**：
    *   在地标编辑页中，可以添加多条“历史事件”。
    *   支持为每个时间节点上传老照片和文字描述。

## 3. 移动端展示 (Mobile)

改造现有的 `MapView.vue`，实现沉浸式探索体验：

### 地图交互
*   **地图引擎**：集成 Leaflet 地图框架，加载适合阅读的地图底图。
*   **动态图标**：根据后端返回的 `category`，渲染不同颜色的标记（如红色代表党史，蓝色代表文化）。
*   **点击交互**：点击地图标记，地图自动移动聚焦，并从底部弹出详情面板。

### 详情面板 (仿照参考图)
*   **半屏抽屉 (Bottom Sheet)**：
    *   顶部：地标名称、地址、封面大图。
    *   **核心区域 - 时光轴**：
        *   左侧显示年份（如 1921）。
        *   右侧显示对应的历史事件和老照片。
        *   支持上下滑动查看该地标的百年变迁。

## 开发步骤

1.  **后端**：创建 `Landmark` 和 `LandmarkEvent` 实体及 API。
2.  **管理端**：开发地标管理页，集成 Leaflet 实现坐标拾取功能。
3.  **移动端**：集成 Leaflet 地图，实现自定义 Marker 和底部时间轴抽屉组件。
4.  **联调**：录入几条深圳的真实数据（如“东江纵队纪念馆”、“国贸大厦”）进行效果验证。
